<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¤ªé˜³ç³»åŠ¨æ€æ˜Ÿå›¾</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      overflow: hidden;
      background: #0a0a1a;
    }

    /* 3D åœºæ™¯å®¹å™¨ */
    #canvas-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, #1a1a2e 0%, #0a0a1a 100%);
    }

    /* é€šç”¨é¢æ¿æ ·å¼ */
    .panel {
      position: fixed;
      background: rgba(20, 25, 40, 0.75);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      color: #ffffff;
      z-index: 100;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* ä¿¡æ¯é¢æ¿ */
    #info-panel {
      top: 20px;
      left: 20px;
      width: 280px;
      padding: 20px;
      opacity: 0;
      transform: translateY(20px) scale(0.95);
      pointer-events: none;
    }

    #info-panel.visible {
      opacity: 1;
      transform: translateY(0) scale(1);
      pointer-events: auto;
    }

    #info-panel h2 {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    #info-panel .divider {
      height: 1px;
      background: rgba(255, 255, 255, 0.1);
      margin: 12px 0;
    }

    #info-panel .info-item {
      display: flex;
      margin-bottom: 8px;
      font-size: 14px;
    }

    #info-panel .info-label {
      color: rgba(255, 255, 255, 0.5);
      margin-right: 8px;
      min-width: 80px;
    }

    #info-panel .info-value {
      color: rgba(255, 255, 255, 0.9);
    }

    #info-panel .info-desc {
      margin-top: 12px;
      font-size: 13px;
      line-height: 1.5;
      color: rgba(255, 255, 255, 0.6);
    }

    /* å…³é—­æŒ‰é’® */
    .close-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      width: 28px;
      height: 28px;
      border: none;
      background: transparent;
      color: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      transition: all 0.2s;
    }

    .close-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.9);
    }

    /* æ§åˆ¶æ  */
    #control-bar {
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 8px 20px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .control-btn {
      width: 40px;
      height: 40px;
      border: none;
      background: transparent;
      color: rgba(255, 255, 255, 0.8);
      cursor: pointer;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      transition: all 0.2s;
    }

    .control-btn:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .control-btn:active {
      transform: scale(0.95);
    }

    .control-btn.active {
      background: rgba(79, 195, 247, 0.3);
      color: #4fc3f7;
    }

    /* é€Ÿåº¦æŒ‡ç¤ºå™¨ */
    #speed-indicator {
      background: rgba(79, 195, 247, 0.2);
      color: #4fc3f7;
      padding: 6px 12px;
      border-radius: 12px;
      font-size: 13px;
      font-weight: 500;
      white-space: nowrap;
    }

    /* æç¤ºä¿¡æ¯ */
    #hint {
      position: fixed;
      bottom: 90px;
      left: 50%;
      transform: translateX(-50%);
      color: rgba(255, 255, 255, 0.4);
      font-size: 13px;
      text-align: center;
      pointer-events: none;
    }

    /* å“åº”å¼ */
    @media (max-width: 768px) {
      #info-panel {
        width: calc(100% - 40px);
        top: 10px;
        left: 20px;
      }

      #control-bar {
        padding: 8px 16px;
      }

      .control-btn {
        width: 36px;
        height: 36px;
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <!-- 3D åœºæ™¯å®¹å™¨ -->
  <div id="canvas-container"></div>

  <!-- ä¿¡æ¯é¢æ¿ -->
  <div id="info-panel" class="panel">
    <button class="close-btn" onclick="closeInfoPanel()">&times;</button>
    <h2 id="planet-name"><span id="planet-icon">ğŸŒ</span> åœ°çƒ</h2>
    <div class="divider"></div>
    <div class="info-item">
      <span class="info-label">ğŸ“Š è·ç¦»å¤ªé˜³</span>
      <span class="info-value" id="planet-distance">1 AU</span>
    </div>
    <div class="info-item">
      <span class="info-label">ğŸ”„ å…¬è½¬å‘¨æœŸ</span>
      <span class="info-value" id="planet-period">365.25å¤©</span>
    </div>
    <div class="info-item">
      <span class="info-label">ğŸŒ¡ï¸ è¡¨é¢æ¸©åº¦</span>
      <span class="info-value" id="planet-temp">15Â°C</span>
    </div>
    <div class="info-desc" id="planet-desc">
      æˆ‘ä»¬å±…ä½çš„è“è‰²æ˜Ÿçƒ,å”¯ä¸€çš„ç”Ÿå‘½å®¶å›­
    </div>
  </div>

  <!-- æ§åˆ¶æ  -->
  <div id="control-bar" class="panel">
    <button class="control-btn" id="btn-pause" onclick="togglePause()" title="æš‚åœ/æ’­æ”¾">â¸</button>
    <button class="control-btn" onclick="changeSpeed(0.5)" title="å‡é€Ÿ">âª</button>
    <button class="control-btn" onclick="changeSpeed(2)" title="åŠ é€Ÿ">â©</button>
    <button class="control-btn" id="btn-orbit" onclick="toggleOrbits()" title="æ˜¾ç¤º/éšè—è½¨é“">ğŸ‘</button>
    <button class="control-btn" onclick="resetCamera()" title="é‡ç½®è§†è§’">ğŸ¯</button>
    <div id="speed-indicator">é€Ÿåº¦: 1.0x</div>
  </div>

  <!-- æç¤º -->
  <div id="hint">æ‹–æ‹½æ—‹è½¬è§†è§’ Â· æ»šè½®ç¼©æ”¾ Â· ç‚¹å‡»è¡Œæ˜ŸæŸ¥çœ‹è¯¦æƒ…</div>

  <!-- Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

  <script>
    // è¡Œæ˜Ÿæ•°æ®
    const planetsData = [
      {
        name: "å¤ªé˜³",
        icon: "â˜€ï¸",
        radius: 5,
        distance: 0,
        color: 0xffd54f,
        speed: 0,
        rotationSpeed: 0.001,
        info: {
          distance: "0 AU",
          period: "è‡ªè½¬çº¦25å¤©",
          temp: "5,500Â°C",
          desc: "å¤ªé˜³ç³»çš„ä¸­å¿ƒæ’æ˜Ÿ,å å¤ªé˜³ç³»æ€»è´¨é‡çš„99.86%"
        }
      },
      {
        name: "æ°´æ˜Ÿ",
        icon: "âš«",
        radius: 0.8,
        distance: 10,
        color: 0x999999,
        speed: 0.04,
        rotationSpeed: 0.005,
        info: {
          distance: "0.39 AU",
          period: "88å¤©",
          temp: "167Â°C",
          desc: "å¤ªé˜³ç³»æœ€å°ã€æœ€å†…ä¾§çš„è¡Œæ˜Ÿ"
        }
      },
      {
        name: "é‡‘æ˜Ÿ",
        icon: "ğŸŸ¡",
        radius: 1.2,
        distance: 15,
        color: 0xffcc80,
        speed: 0.03,
        rotationSpeed: 0.003,
        info: {
          distance: "0.72 AU",
          period: "225å¤©",
          temp: "464Â°C",
          desc: "æœ€äº®çš„è¡Œæ˜Ÿ,æœ‰æµ“åšå¤§æ°”å±‚"
        }
      },
      {
        name: "åœ°çƒ",
        icon: "ğŸŒ",
        radius: 1.3,
        distance: 20,
        color: 0x4fc3f7,
        speed: 0.02,
        rotationSpeed: 0.02,
        info: {
          distance: "1 AU",
          period: "365.25å¤©",
          temp: "15Â°C",
          desc: "æˆ‘ä»¬å±…ä½çš„è“è‰²æ˜Ÿçƒ,å”¯ä¸€çš„ç”Ÿå‘½å®¶å›­"
        }
      },
      {
        name: "ç«æ˜Ÿ",
        icon: "ğŸ”´",
        radius: 1.0,
        distance: 25,
        color: 0xef5350,
        speed: 0.018,
        rotationSpeed: 0.018,
        info: {
          distance: "1.52 AU",
          period: "687å¤©",
          temp: "-65Â°C",
          desc: "çº¢è‰²æ˜Ÿçƒ,äººç±»æ¢ç´¢çš„ä¸‹ä¸€ä¸ªç›®æ ‡"
        }
      },
      {
        name: "æœ¨æ˜Ÿ",
        icon: "ğŸŸ¤",
        radius: 3.5,
        distance: 35,
        color: 0xffb74d,
        speed: 0.008,
        rotationSpeed: 0.04,
        info: {
          distance: "5.2 AU",
          period: "11.86å¹´",
          temp: "-110Â°C",
          desc: "å¤ªé˜³ç³»æœ€å¤§çš„è¡Œæ˜Ÿ,æ°”æ€å·¨è¡Œæ˜Ÿ"
        }
      },
      {
        name: "åœŸæ˜Ÿ",
        icon: "ğŸª",
        radius: 3.0,
        distance: 45,
        color: 0xffe082,
        speed: 0.006,
        rotationSpeed: 0.038,
        info: {
          distance: "9.5 AU",
          period: "29.46å¹´",
          temp: "-140Â°C",
          desc: "æ‹¥æœ‰å£®è§‚ç¯ç³»ç»Ÿçš„æ°”æ€å·¨è¡Œæ˜Ÿ"
        }
      }
    ];

    // å…¨å±€å˜é‡
    let scene, camera, renderer, controls;
    let planets = [];
    let orbits = [];
    let animationSpeed = 1;
    let isPaused = false;
    let showOrbits = true;
    let raycaster, mouse;
    let selectedPlanet = null;

    // åˆå§‹åŒ–åœºæ™¯
    function init() {
      // åœºæ™¯
      scene = new THREE.Scene();

      // ç›¸æœº
      camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      camera.position.set(0, 40, 60);

      // æ¸²æŸ“å™¨
      renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(window.devicePixelRatio);
      document.getElementById('canvas-container').appendChild(renderer.domElement);

      // æ§åˆ¶å™¨
      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.05;
      controls.minDistance = 20;
      controls.maxDistance = 150;

      // ç¯å¢ƒå…‰
      const ambientLight = new THREE.AmbientLight(0x333333);
      scene.add(ambientLight);

      // åˆ›å»ºæ˜Ÿç©ºèƒŒæ™¯
      createStarfield();

      // åˆ›å»ºè¡Œæ˜Ÿ
      createPlanets();

      // å°„çº¿æ£€æµ‹å™¨
      raycaster = new THREE.Raycaster();
      mouse = new THREE.Vector2();

      // äº‹ä»¶ç›‘å¬
      window.addEventListener('resize', onWindowResize);
      renderer.domElement.addEventListener('click', onMouseClick);
      renderer.domElement.addEventListener('mousemove', onMouseMove);

      // å¼€å§‹åŠ¨ç”»
      animate();
    }

    // åˆ›å»ºæ˜Ÿç©ºèƒŒæ™¯
    function createStarfield() {
      const starsGeometry = new THREE.BufferGeometry();
      const starsMaterial = new THREE.PointsMaterial({
        color: 0xffffff,
        size: 0.5,
        transparent: true,
        opacity: 0.8
      });

      const starsVertices = [];
      for (let i = 0; i < 3000; i++) {
        const x = (Math.random() - 0.5) * 400;
        const y = (Math.random() - 0.5) * 400;
        const z = (Math.random() - 0.5) * 400;
        starsVertices.push(x, y, z);
      }

      starsGeometry.setAttribute('position',
        new THREE.Float32BufferAttribute(starsVertices, 3));

      const stars = new THREE.Points(starsGeometry, starsMaterial);
      scene.add(stars);
    }

    // åˆ›å»ºè¡Œæ˜Ÿ
    function createPlanets() {
      planetsData.forEach((data, index) => {
        // è¡Œæ˜Ÿå‡ ä½•ä½“
        const geometry = new THREE.SphereGeometry(data.radius, 32, 32);

        // å¤ªé˜³ä½¿ç”¨å‘å…‰æè´¨
        let material;
        if (data.distance === 0) {
          material = new THREE.MeshBasicMaterial({
            color: data.color,
          });

          // å¤ªé˜³å…‰æº
          const sunLight = new THREE.PointLight(0xffffff, 2, 200);
          sunLight.position.set(0, 0, 0);
          scene.add(sunLight);
        } else {
          material = new THREE.MeshStandardMaterial({
            color: data.color,
            roughness: 0.8,
            metalness: 0.2
          });
        }

        const planet = new THREE.Mesh(geometry, material);
        planet.userData = { ...data, index };

        // åˆå§‹ä½ç½®
        const angle = Math.random() * Math.PI * 2;
        planet.position.x = Math.cos(angle) * data.distance;
        planet.position.z = Math.sin(angle) * data.distance;

        scene.add(planet);
        planets.push({
          mesh: planet,
          data: data,
          angle: angle
        });

        // åˆ›å»ºè½¨é“çº¿
        if (data.distance > 0) {
          const orbitGeometry = new THREE.RingGeometry(
            data.distance - 0.1,
            data.distance + 0.1,
            64
          );
          const orbitMaterial = new THREE.MeshBasicMaterial({
            color: 0xffffff,
            transparent: true,
            opacity: 0.15,
            side: THREE.DoubleSide
          });
          const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
          orbit.rotation.x = Math.PI / 2;
          scene.add(orbit);
          orbits.push(orbit);
        }
      });
    }

    // åŠ¨ç”»å¾ªç¯
    function animate() {
      requestAnimationFrame(animate);

      // æ›´æ–°è¡Œæ˜Ÿä½ç½®
      if (!isPaused) {
        planets.forEach(planet => {
          if (planet.data.distance > 0) {
            planet.angle += planet.data.speed * animationSpeed * 0.01;
            planet.mesh.position.x = Math.cos(planet.angle) * planet.data.distance;
            planet.mesh.position.z = Math.sin(planet.angle) * planet.data.distance;
          }
          planet.mesh.rotation.y += planet.data.rotationSpeed;
        });
      }

      controls.update();
      renderer.render(scene, camera);
    }

    // çª—å£å¤§å°è°ƒæ•´
    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }

    // é¼ æ ‡ç‚¹å‡»
    function onMouseClick(event) {
      mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
      mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

      raycaster.setFromCamera(mouse, camera);
      const intersects = raycaster.intersectObjects(planets.map(p => p.mesh));

      if (intersects.length > 0) {
        const planet = intersects[0].object;
        showPlanetInfo(planet.userData);
      }
    }

    // é¼ æ ‡ç§»åŠ¨ (æ‚¬åœæ•ˆæœ)
    function onMouseMove(event) {
      mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
      mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

      raycaster.setFromCamera(mouse, camera);
      const intersects = raycaster.intersectObjects(planets.map(p => p.mesh));

      if (intersects.length > 0) {
        renderer.domElement.style.cursor = 'pointer';
      } else {
        renderer.domElement.style.cursor = 'default';
      }
    }

    // æ˜¾ç¤ºè¡Œæ˜Ÿä¿¡æ¯
    function showPlanetInfo(data) {
      document.getElementById('planet-icon').textContent = data.icon;
      document.getElementById('planet-name').innerHTML =
        `<span id="planet-icon">${data.icon}</span> ${data.name}`;
      document.getElementById('planet-distance').textContent = data.info.distance;
      document.getElementById('planet-period').textContent = data.info.period;
      document.getElementById('planet-temp').textContent = data.info.temp;
      document.getElementById('planet-desc').textContent = data.info.desc;

      document.getElementById('info-panel').classList.add('visible');

      // ç›¸æœºèšç„¦
      focusOnPlanet(data);
    }

    // ç›¸æœºèšç„¦
    function focusOnPlanet(data) {
      const targetPosition = new THREE.Vector3(
        planets[data.index].mesh.position.x,
        planets[data.index].mesh.position.y,
        planets[data.index].mesh.position.z
      );

      const cameraOffset = data.radius * 5 + 10;
      const newCameraPosition = new THREE.Vector3(
        targetPosition.x + cameraOffset,
        targetPosition.y + cameraOffset * 0.5,
        targetPosition.z + cameraOffset
      );

      // å¹³æ»‘è¿‡æ¸¡
      const startPosition = camera.position.clone();
      const startTarget = controls.target.clone();
      const duration = 1000;
      const startTime = Date.now();

      function animateCamera() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);

        // ç¼“åŠ¨å‡½æ•°
        const eased = 1 - Math.pow(1 - progress, 3);

        camera.position.lerpVectors(startPosition, newCameraPosition, eased);
        controls.target.lerpVectors(startTarget, targetPosition, eased);

        if (progress < 1) {
          requestAnimationFrame(animateCamera);
        }
      }

      animateCamera();
    }

    // å…³é—­ä¿¡æ¯é¢æ¿
    function closeInfoPanel() {
      document.getElementById('info-panel').classList.remove('visible');
    }

    // æš‚åœ/æ’­æ”¾
    function togglePause() {
      isPaused = !isPaused;
      const btn = document.getElementById('btn-pause');
      btn.textContent = isPaused ? 'â–¶ï¸' : 'â¸';
      btn.classList.toggle('active', isPaused);
    }

    // æ”¹å˜é€Ÿåº¦
    function changeSpeed(factor) {
      if (factor > 1) {
        animationSpeed = Math.min(animationSpeed * factor, 8);
      } else {
        animationSpeed = Math.max(animationSpeed * factor, 0.25);
      }
      document.getElementById('speed-indicator').textContent =
        `é€Ÿåº¦: ${animationSpeed.toFixed(1)}x`;
    }

    // åˆ‡æ¢è½¨é“æ˜¾ç¤º
    function toggleOrbits() {
      showOrbits = !showOrbits;
      orbits.forEach(orbit => {
        orbit.visible = showOrbits;
      });
      document.getElementById('btn-orbit').classList.toggle('active', !showOrbits);
    }

    // é‡ç½®ç›¸æœº
    function resetCamera() {
      camera.position.set(0, 40, 60);
      controls.target.set(0, 0, 0);
      controls.update();
    }

    // åˆå§‹åŒ–
    init();
  </script>
</body>
</html>
